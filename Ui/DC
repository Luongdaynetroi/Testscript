--[[
    DClib - Dac Cau Library
    Roblox UI Library với rounded design
]]

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local RunService = game:GetService("RunService")

local Player = Players.LocalPlayer
local DClib = {}

-- Theme mặc định
DClib.Theme = "Dark"
DClib.Themes = {
    Dark = {
        Background = Color3.fromRGB(45, 45, 45),
        Stroke = Color3.fromRGB(65, 65, 65),
        Text = Color3.fromRGB(245, 245, 245),
        Text2 = Color3.fromRGB(190, 190, 190),
        Accent = Color3.fromRGB(88, 101, 242)
    }
}

-- Hàm tạo instance
local function Create(instanceType, properties)
    local instance = Instance.new(instanceType)
    for prop, value in pairs(properties or {}) do
        instance[prop] = value
    end
    return instance
end

-- Tạo corner tròn
local function MakeCorner(parent, radius)
    local corner = Create("UICorner", {
        Parent = parent,
        CornerRadius = UDim.new(0, radius or 8)
    })
    return corner
end

-- Tạo stroke
local function MakeStroke(parent, color, thickness)
    local stroke = Create("UIStroke", {
        Parent = parent,
        Color = color or DClib.Themes[DClib.Theme].Stroke,
        Thickness = thickness or 1
    })
    return stroke
end

-- Hàm tween
local function Tween(instance, properties, duration)
    local tweenInfo = TweenInfo.new(duration or 0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tween = TweenService:Create(instance, tweenInfo, properties)
    tween:Play()
    return tween
end

-- Tạo Window
function DClib:MakeWindow(config)
    local name = config.Name or "DClib"
    local subtitle = config.SubTitle or ""
    
    -- ScreenGui
    local ScreenGui = Create("ScreenGui", {
        Name = "DClib_ScreenGui",
        Parent = RunService:IsClient() and CoreGui or Player:WaitForChild("PlayerGui"),
        ResetOnSpawn = false,
        IgnoreGuiInset = true
    })
    
    -- Main Frame (tròn)
    local MainFrame = Create("Frame", {
        Name = "MainFrame",
        Parent = ScreenGui,
        Size = UDim2.new(0, 550, 0, 380),
        Position = UDim2.new(0.5, -275, 0.5, -190),
        BackgroundColor3 = DClib.Themes[DClib.Theme].Background,
        BorderSizePixel = 0
    })
    
    r tròn cho main frame
    MakeCorner(MainFrame, 12)
    MakeStroke(MainFrame, DClib.Themes[DClib.Theme].Stroke, 1)
    
    -- Title Bar
    local TitleBar = Create("Frame", {
        Name = "TitleBar",
        Parent = MainFrame,
        Size = UDim2.new(1, 0, 0, 35),
        BackgroundTransparency = 1
    })
    
    local TitleLabel = Create("TextLabel", {
        Name = "Title",
        Parent = TitleBar,
        Size = UDim2.new(1, -70, 1, 0),
        Position = UDim2.new(0, 10, 0, 0),
        BackgroundTransparency = 1,
        Text = name,
        TextColor3 = DClib.Themes[DClib.Theme].Text,
        TextXAlignment = "Left",
        Font = Enum.Font.GothamBold,
        TextSize = 14
    })
    
    local SubTitleLabel = Create("TextLabel", {
        Name = "SubTitle",
        Parent = TitleBar,
        Size = UDim2.new(1, -80, 0, 12),
        Position = UDim2.new(0, 10, 1, -12),
        BackgroundTransparency = 1,
        Text = subtitle,
        TextColor3 = DClib.Themes[DClib.Theme].Text2,
        TextXAlignment = "Left",
        Font = Enum.Font.Gotham,
        TextSize = 10
    })
    
    -- Close Button
    local CloseBtn = Create("ImageButton", {
        Name = "CloseButton",
        Parent = TitleBar,
        Size = UDim2.new(0, 16, 0, 16),
        Position = UDim2.new(1, -24, 0.5, -8),
        BackgroundTransparency = 1,
        Image = "rbxassetid://10747384394",
        ImageColor3 = DClib.Themes[DClib.Theme].Text2
    })
    
    CloseBtn.MouseButton1Click:Connect(function()
        Tween(MainFrame, {Size = UDim2.new(0, 0, 0, 0)}, 0.2)
        Tween(MainFrame, {Transparency = 1}, 0.2)
        task.wait(0.2)
        ScreenGui:Destroy()
    end)
    
    -- Minimize Button
    local MinimizeBtn = Create("ImageButton", {
        Name = "MinimizeButton",
        Parent = TitleBar,
        Size = UDim2.new(0, 16, 0, 16),
        Position = UDim2.new(1, -44, 0.5, -8),
        BackgroundTransparency = 1,
        Image = "rbxassetid://10734896206",
        ImageColor3 = DClib.Themes[DClib.Theme].Text2
    })
    
    local minimized = false
    MinimizeBtn.MouseButton1Click:Connect(function()
        if minimized then
            Tween(MainFrame, {Size = UDim2.new(0, 550, 0, 380)}, 0.25)
            minimized = false
        else
            Tween(MainFrame, {Size = UDim2.new(0, 550, 0, 35)}, 0.25)
            minimized = true
        end
    end)
    
    -- Content Container
    local Content = Create("Frame", {
        Name = "Content",
        Parent = MainFrame,
        Size = UDim2.new(1, 0, 1, -35),
        Position = UDim2.new(0, 0, 0, 35),
        BackgroundTransparency = 1,
        ClipsDescendants = true
    })
    
    -- Tab Area
    local TabArea = Create("Frame", {
        Name = "TabArea",
        Parent = Content,
        Size = UDim2.new(1, 0, 0, 45),
        BackgroundTransparency = 1
    })
    
    local TabScroll = Create("ScrollingFrame", {
        Name = "TabScroll",
        Parent = TabArea,
        Size = UDim2.new(1, -20, 1, 0),
        Position = UDim2.new(0, 10, 0, 0),
        BackgroundTransparency = 1,
        ScrollBarThickness = 0,
        ScrollingDirection = "X",
        AutomaticCanvasSize = "X"
    })
    
    local TabLayout = Create("UIListLayout", {
        Parent = TabScroll,
        Padding = UDim.new(0, 5),
        FillDirection = "Horizontal",
        VerticalAlignment = "Center",
        HorizontalAlignment = "Center"
    })
    
    -- Main Content
    local MainContent = Create("Frame", {
        Name = "MainContent",
        Parent = Content,
        Size = UDim2.new(1, -20, 1, -55),
        Position = UDim2.new(0, 10, 0, 55),
        BackgroundTransparency = 1
    })
    
    local ContentScroll = Create("ScrollingFrame", {
        Name = "ContentScroll",
        Parent = MainContent,
        Size = UDim2.new(1, 0, 1, 0),
        BackgroundTransparency = 1,
        ScrollBarThickness = 4,
        ScrollBarImageColor3 = DClib.Themes[DClib.Theme].Accent,
        AutomaticCanvasSize = "Y"
    })
    
    local ContentLayout = Create("UIListLayout", {
        Parent = ContentScroll,
        Padding = UDim.new(0, 10),
        SortOrder = "LayoutOrder"
    })
    
    local Padding = Create("UIPadding", {
        Parent = ContentScroll,
        PaddingLeft = UDim.new(0, 10),
        PaddingRight = UDim.new(0, 10),
        PaddingTop = UDim.new(0, 10),
        PaddingBottom = UDim.new(0, 10)
    })
    
    -- Drag functionality
    local dragging = false
    local dragStart = nil
    local startPos = nil
    
    TitleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position
            
            local conn1, conn2
            conn1 = UserInputService.InputChanged:Connect(function(input)
                if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                    local delta = input.Position - dragStart
                    MainFrame.Position = UDim2.new(
                        startPos.X.Scale,
                        startPos.X.Offset + delta.X,
                        startPos.Y.Scale,
                        startPos.Y.Offset + delta.Y
                    )
                end
            end)
            
            conn2 = UserInputService.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    dragging = false
                    conn1:Disconnect()
                    conn2:Disconnect()
                end
            end)
        end
    end)
    
    -- Tab storage
    local tabs = {}
    local tabPanels = {}
    
    local Window = {}
    
    -- Add Minimize Button (custom)
    function Window:AddMinimizeButton(config)
        local btn = Create("ImageButton", {
            Name = "CustomMinimize",
            Parent = TitleBar,
            Size = config.Button.Size or UDim2.new(0, 30, 0, 30),
            Position = config.Button.Position or UDim2.new(1, -78, 0.5, -15),
            BackgroundColor3 = config.Button.BackgroundColor3 or DClib.Themes[DClib.Theme].Background,
            Image = config.Button.Image or "rbxassetid://125965818173870",
            AutoButtonColor = false
        })
        
        MakeCorner(btn, config.Corner.CornerRadius or 6)
        MakeStroke(btn, config.Stroke.Color or DClib.Themes[DClib.Theme].Accent, config.Stroke.Thickness or 1)
        
        btn.MouseButton1Click:Connect(function()
            if minimized then
                Tween(MainFrame, {Size = UDim2.new(0, 550, 0, 380)}, 0.25)
                minimized = false
            else
                Tween(MainFrame, {Size = UDim2.new(0, 550, 0, 35)}, 0.25)
                minimized = true
            end
        end)
        
        return btn
    end
    
    -- Add Tab
    function Window:AddTab(config)
        local tabName = config.Name or "Tab"
        local tabIcon = config.Icon or ""
        
        -- Tab Button (tròn)
        local TabBtn = Create("TextButton", {
            Name = "TabBtn_" .. tabName,
            Parent = TabScroll,
            Size = UDim2.new(0, 75, 0, 32),
            BackgroundColor3 = DClib.Themes[DClib.Theme].Background,
            Text = "",
            AutoButtonColor = true,
            BorderSizePixel = 0
        })
        
        MakeCorner(TabBtn, 8)
        MakeStroke(TabBtn, DClib.Themes[DClib.Theme].Stroke, 1)
        
        -- Icon
        if tabIcon ~= "" then
            local Icon = Create("ImageLabel", {
                Name = "Icon",
                Parent = TabBtn,
                Size = UDim2.new(0, 18, 0, 18),
                Position = UDim2.new(0.5, -9, 0.5, -10),
                BackgroundTransparency = 1,
                Image = tabIcon,
                ImageColor3 = DClib.Themes[DClib.Theme].Text
            })
        end
        
        -- Label
        local Label = Create("TextLabel", {
            Name = "Label",
            Parent = TabBtn,
            Size = UDim2.new(1, 0, 0, 12),
            Position = UDim2.new(0, 0, 1, -12),
            BackgroundTransparency = 1,
            Text = tabName,
            TextColor3 = DClib.Themes[DClib.Theme].Text,
            TextSize = 10,
            Font = Enum.Font.GothamMedium,
            TextXAlignment = "Center"
        })
        
        -- Content Panel (tròn)
        local Panel = Create("Frame", {
            Name = "Panel_" .. tabName,
            Parent = ContentScroll,
            Size = UDim2.new(1, 0, 0, 50),
            Visible = false,
            BackgroundColor3 = DClib.Themes[DClib.Theme].Background,
            ClipsDescendants = true
        })
        
        MakeCorner(Panel, 8)
        MakeStroke(Panel, DClib.Themes[DClib.Theme].Stroke, 1)
        
        local PanelScroll = Create("ScrollingFrame", {
            Name = "PanelScroll",
            Parent = Panel,
            Size = UDim2.new(1, -4, 1, -4),
            Position = UDim2.new(0, 2, 0, 2),
            BackgroundTransparency = 1,
            ScrollBarThickness = 4,
            ScrollBarImageColor3 = DClib.Themes[DClib.Theme].Accent,
            AutomaticCanvasSize = "Y"
        })
        
        local PanelLayout = Create("UIListLayout", {
            Parent = PanelScroll,
            Padding = UDim.new(0, 8),
            SortOrder = "LayoutOrder"
        })
        
        local PanelPadding = Create("UIPadding", {
            Parent = PanelScroll,
            PaddingLeft = UDim.new(0, 8),
            PaddingRight = UDim.new(0, 8),
            PaddingTop = UDim.new(0, 8),
            PaddingBottom = UDim.new(0, 8)
        })
        
        table.insert(tabs, TabBtn)
        table.insert(tabPanels, Panel)
        
        -- Click handler
        TabBtn.MouseButton1Click:Connect(function()
            -- Hide all panels
            for _, p in ipairs(tabPanels) do
                p.Visible = false
            end
            
            -- Show this panel
            Panel.Visible = true
            Panel.Size = UDim2.new(1, 0, 0, 100)
            Tween(Panel, {Size = UDim2.new(1, 0, 1, -4)}, 0.2)
        end)
        
        local TabObj = {}
        
        function TabObj:AddSection(text)
            local Section = Create("Frame", {
                Name = "Section",
                Parent = PanelScroll,
                Size = UDim2.new(1, 0, 0, 20),
                BackgroundTransparency = 1
            })
            
            local Label = Create("TextLabel", {
                Name = "Label",
                Parent = Section,
                Size = UDim2.new(1, 0, 1, 0),
                BackgroundTransparency = 1,
                Text = text,
                TextColor3 = DClib.Themes[DClib.Theme].Text,
                TextSize = 12,
                Font = Enum.Font.GothamBold,
                TextXAlignment = "Left"
            })
            
            return Section
        end
        
        function TabObj:AddButton(config)
            local btnName = config.Name or "Button"
            local callback = config.Callback or function() end
            
            local Btn = Create("TextButton", {
                Name = "Button",
                Parent = PanelScroll,
                Size = UDim2.new(1, 0, 0, 35),
                BackgroundColor3 = DClib.Themes[DClib.Theme].Background,
                Text = "",
                AutoButtonColor = true,
                BorderSizePixel = 0
            })
            
            MakeCorner(Btn, 6)
            MakeStroke(Btn, DClib.Themes[DClib.Theme].Stroke, 1)
            
            local BtnLabel = Create("TextLabel", {
                Name = "Label",
                Parent = Btn,
                Size = UDim2.new(1, -20, 1, 0),
                Position = UDim2.new(0, 10, 0, 0),
                BackgroundTransparency = 1,
                Text = btnName,
                TextColor3 = DClib.Themes[DClib.Theme].Text,
                TextSize = 13,
                Font = Enum.Font.GothamMedium,
                TextXAlignment = "Left"
            })
            
            Btn.MouseEnter:Connect(function()
                Tween(Btn, {BackgroundTransparency = 0.2}, 0.1)
            end)
            
            Btn.MouseLeave:Connect(function()
                Tween(Btn, {BackgroundTransparency = 0}, 0.1)
            end)
            
            Btn.MouseButton1Click:Connect(callback)
            
            return Btn
        end
        
        function TabObj:AddToggle(config)
            local toggleName = config.Name or "Toggle"
            local default = config.Default or false
            local callback = config.Callback or function() end
            
            local Toggle = Create("Frame", {
                Name = "Toggle",
                Parent = PanelScroll,
                Size = UDim2.new(1, 0, 0, 35),
                BackgroundTransparency = 1
            })
            
            local Label = Create("TextLabel", {
                Name = "Label",
                Parent = Toggle,
                Size = UDim2.new(1, -50, 1, 0),
                BackgroundTransparency = 1,
                Text = toggleName,
                TextColor3 = DClib.Themes[DClib.Theme].Text,
                TextSize = 13,
                Font = Enum.Font.GothamMedium,
                TextXAlignment = "Left"
            })
            
            local ToggleBtn = Create("TextButton", {
                Name = "ToggleBtn",
                Parent = Toggle,
                Size = UDim2.new(0, 40, 0, 20),
                Position = UDim2.new(1, -45, 0.5, -10),
                BackgroundColor3 = DClib.Themes[DClib.Theme].Stroke,
                Text = "",
                AutoButtonColor = true,
                BorderSizePixel = 0
            })
            
            MakeCorner(ToggleBtn, 10)
            
            local Knob = Create("Frame", {
                Name = "Knob",
                Parent = ToggleBtn,
                Size = UDim2.new(0, 16, 0, 16),
                Position = UDim2.new(0, 2, 0.5, -8),
                BackgroundColor3 = DClib.Themes[DClib.Theme].Accent
            })
            
            MakeCorner(Knob, 8)
            
            local function SetValue(val)
                if val then
                    Tween(Knob, {Position = UDim2.new(1, -18, 0.5, -8)}, 0.15)
                else
                    Tween(Knob, {Position = UDim2.new(0, 2, 0.5, -8)}, 0.15)
                end
            end
            
            SetValue(default)
            
            ToggleBtn.MouseButton1Click:Connect(function()
                default = not default
                SetValue(default)
                callback(default)
            end)
            
            return {Set = SetValue, Get = function() return default end}
        end
        
        function TabObj:AddSlider(config)
            local sliderName = config.Name or "Slider"
            local min = config.Min or 0
            local max = config.Max or 100
            local default = config.Default or 50
            local callback = config.Callback or function() end
            
            local Slider = Create("Frame", {
                Name = "Slider",
                Parent = PanelScroll,
                Size = UDim2.new(1, 0, 0, 45),
                BackgroundTransparency = 1
            })
            
            local Label = Create("TextLabel", {
                Name = "Label",
                Parent = Slider,
                Size = UDim2.new(1, -60, 0, 16),
                BackgroundTransparency = 1,
                Text = sliderName .. ": " .. tostring(default),
                TextColor3 = DClib.Themes[DClib.Theme].Text,
                TextSize = 12,
                Font = Enum.Font.GothamMedium,
                TextXAlignment = "Left"
            })
            
            local Bar = Create("Frame", {
                Name = "Bar",
                Parent = Slider,
                Size = UDim2.new(1, 0, 0, 6),
                Position = UDim2.new(0, 0, 1, -10),
                BackgroundColor3 = DClib.Themes[DClib.Theme].Stroke
            })
            
            MakeCorner(Bar, 3)
            
            local Fill = Create("Frame", {
                Name = "Fill",
                Parent = Bar,
                Size = UDim2.new(0.5, 0, 1, 0),
                BackgroundColor3 = DClib.Themes[DClib.Theme].Accent
            })
            
            MakeCorner(Fill, 3)
            
            local Knob = Create("Frame", {
                Name = "Knob",
                Parent = Bar,
                Size = UDim2.new(0, 14, 0, 14),
                Position = UDim2.new(0.5, -7, 0.5, -7),
                BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            })
            
            MakeCorner(Knob, 7)
            
            local function UpdateValue(val)
                local pct = (val - min) / (max - min)
                Fill.Size = UDim2.new(pct, 0, 1, 0)
                Knob.Position = UDim2.new(pct, -7, 0.5, -7)
                Label.Text = sliderName .. ": " .. tostring(math.floor(val))
                callback(val)
            end
            
            local dragging = false
            Knob.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    dragging = true
                    local conn
                    conn = UserInputService.InputChanged:Connect(function(input)
                        if dragging then
                            local pos = Bar.AbsolutePosition.X
                            local width = Bar.AbsoluteSize.X
                            local x = math.clamp(input.Position.X - pos, 0, width)
                            local pct = x / width
                            local val = min + pct * (max - min)
                            UpdateValue(val)
                        end
                    end)
                    
                    UserInputService.InputEnded:Connect(function()
                        dragging = false
                        conn:Disconnect()
                    end)
                end
            end)
            
            UpdateValue(default)
            
            return {Set = UpdateValue, Get = function() return default end}
        end
        
        function TabObj:AddParagraph(config)
            local title = config.Title or "Title"
            local text = config.Text or ""
            
            local Paragraph = Create("Frame", {
                Name = "Paragraph",
                Parent = PanelScroll,
                Size = UDim2.new(1, 0, 0, 55),
                BackgroundTransparency = 1
            })
            
            local Title = Create("TextLabel", {
                Name = "Title",
                Parent = Paragraph,
                Size = UDim2.new(1, 0, 0, 18),
                BackgroundTransparency = 1,
                Text = title,
                TextColor3 = DClib.Themes[DClib.Theme].Text,
                TextSize = 12,
                Font = Enum.Font.GothamBold,
                TextXAlignment = "Left"
            })
            
            local Text = Create("TextLabel", {
                Name = "Text",
                Parent = Paragraph,
                Size = UDim2.new(1, 0, 1, -18),
                Position = UDim2.new(0, 0, 0, 18),
                BackgroundTransparency = 1,
                Text = text,
                TextColor3 = DClib.Themes[DClib.Theme].Text2,
                TextSize = 11,
                Font = Enum.Font.Gotham,
                TextWrapped = true,
                TextXAlignment = "Left",
                TextYAlignment = "Top"
            })
            
            return Paragraph
        end
        
        return TabObj
    end
    
    -- Notify function
    function Window:Notify(config)
        local title = config.Title or "Notify"
        local text = config.Text or ""
        local duration = config.Duration or 5
        
        local colors = {
            Info = DClib.Themes[DClib.Theme].Accent,
            Success = Color3.fromRGB(0, 200, 0),
            Warning = Color3.fromRGB(255, 200, 0),
            Error = Color3.fromRGB(255, 0, 0)
        }
        
        local NotifyFrame = Create("Frame", {
            Name = "NotifyFrame",
            Parent = ScreenGui,
            Size = UDim2.new(0, 300, 0, 80),
            Position = UDim2.new(1, -320, 0, 10),
            BackgroundColor3 = DClib.Themes[DClib.Theme].Background,
            ZIndex = 10000
        })
        
        MakeCorner(NotifyFrame, 8)
        MakeStroke(NotifyFrame, DClib.Themes[DClib.Theme].Stroke, 1)
        
        local Title = Create("TextLabel", {
            Name = "Title",
            Parent = NotifyFrame,
            Size = UDim2.new(1, -10, 0, 20),
            Position = UDim2.new(0, 5, 0, 5),
            BackgroundTransparency = 1,
            Text = title,
            TextColor3 = colors[config.Type] or colors.Info,
            TextSize = 14,
            Font = Enum.Font.GothamBold,
            TextXAlignment = "Left"
        })
        
        local Text = Create("TextLabel", {
            Name = "Text",
            Parent = NotifyFrame,
            Size = UDim2.new(1, -10, 0, 40),
            Position = UDim2.new(0, 5, 0, 25),
            BackgroundTransparency = 1,
            Text = text,
            TextColor3 = DClib.Themes[DClib.Theme].Text2,
            TextSize = 12,
            Font = Enum.Font.Gotham,
            TextWrapped = true,
            TextXAlignment = "Left"
        })
        
        Tween(NotifyFrame, {Position = UDim2.new(1, -10, 0, 10)}, 0.3)
        
        task.delay(duration, function()
            Tween(NotifyFrame, {Position = UDim2.new(1, -320, 0, 10)}, 0.3)
            task.wait(0.3)
            NotifyFrame:Destroy()
        end)
    end
    
    -- Dialog function
    function Window:Dialog(config)
        local title = config.Title or "Dialog"
        local text = config.Text or ""
        local options = config.Options or {}
        
        local Overlay = Create("Frame", {
            Name = "Overlay",
            Parent = ScreenGui,
            Size = UDim2.new(1, 0, 1, 0),
            BackgroundColor3 = Color3.fromRGB(0, 0, 0),
            BackgroundTransparency = 0.5,
            ZIndex = 9999
        })
        
        local Dialog = Create("Frame", {
            Name = "Dialog",
            Parent = Overlay,
            Size = UDim2.new(0, 320, 0, 160),
            Position = UDim2.new(0.5, -160, 0.5, -80),
            BackgroundColor3 = DClib.Themes[DClib.Theme].Background
        })
        
        MakeCorner(Dialog, 12)
        
        local Title = Create("TextLabel", {
            Name = "Title",
            Parent = Dialog,
            Size = UDim2.new(1, -20, 0, 25),
            Position = UDim2.new(0, 10, 0, 5),
            BackgroundTransparency = 1,
            Text = title,
            TextColor3 = DClib.Themes[DClib.Theme].Text,
            TextSize = 14,
            Font = Enum.Font.GothamBold,
            TextXAlignment = "Left"
        })
        
        local Text = Create("TextLabel", {
            Name = "Text",
            Parent = Dialog,
            Size = UDim2.new(1, -20, 0, 50),
            Position = UDim2.new(0, 10, 0, 30),
            BackgroundTransparency = 1,
            Text = text,
            TextColor3 = DClib.Themes[DClib.Theme].Text2,
            TextSize = 12,
            Font = Enum.Font.Gotham,
            TextWrapped = true,
            TextXAlignment = "Left"
        })
        
        local BtnContainer = Create("Frame", {
            Name = "BtnContainer",
            Parent = Dialog,
            Size = UDim2.new(1, -20, 0, 40),
            Position = UDim2.new(0, 10, 1, -45),
            BackgroundTransparency = 1
        })
        
        local BtnLayout = Create("UIListLayout", {
            Parent = BtnContainer,
            Padding = UDim.new(0, 10),
            FillDirection = "Horizontal",
            HorizontalAlignment = "Center"
        })
        
        local function Close()
            Tween(Dialog, {Size = UDim2.new(0, 0, 0, 0)}, 0.2)
            Tween(Overlay, {Transparency = 1}, 0.2)
            task.wait(0.2)
            Overlay:Destroy()
        end
        
        for _, opt in ipairs(options) do
            local optName = opt[1]
            local optCallback = opt[2]
            
            local Btn = Create("TextButton", {
                Name = "Btn_" .. optName,
                Parent = BtnContainer,
                Size = UDim2.new(0, 100, 0, 32),
                BackgroundColor3 = DClib.Themes[DClib.Theme].Accent,
                Text = optName,
                TextColor3 = DClib.Themes[DClib.Theme].Text,
                AutoButtonColor = true,
                Font = Enum.Font.GothamBold,
                TextSize = 12
            })
            
            MakeCorner(Btn, 6)
            
            Btn.MouseButton1Click:Connect(function()
                if optCallback then optCallback() end
                Close()
            end)
        end
    end
    
    return Window
end

return DClib
